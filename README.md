# assignment-1

Google doc link:
https://docs.google.com/document/d/1tXsjnKTAvbaIt3HoFy2Hb7Ln5krJ6E2Mr0ybT6ZzAFE/edit?usp=sharing

# How to Use the Web Application

# General Architecture


## Frontend File Structure

```
opencv-app
├── README.md
├── babel.config.js
├── dist
├── node_modules
├── package-lock.json
├── package.json
├── public
│   └── index.html
└── src
    ├── App.vue
    ├── assets
    │   └── global.css
    ├── components
    │   ├── ImageUpload.vue
    │   ├── LoginStatus.vue
    │   ├── NavBar.vue
    │   └── Welcome.vue
    ├── main.js
    ├── router
    │   └── index.js
    └── views
        ├── Home.vue
        ├── Login.vue
        ├── Register.vue
        ├── Thumbnails.vue
        └── Upload.vue
```





## Backend
The backend of the web application is implemented using the FLASK framework. The general file structure is outlined as follows:

```
├── Pipfile
├── Pipfile.lock
├── README.md
├── api
│   ├── endpoints
│   │   ├── photo.py
│   │   ├── ta.py
│   │   └── user.py
│   ├── helpers.py
│   ├── parsers.py
│   ├── restplus.py
│   ├── serializers.py
│   ├── yolo-coco
│   │   ├── coco.names
│   │   ├── yolov3.cfg
│   │   └── yolov3.weights
│   └── yolo.py
├── app.py
├── config.py
├── database
│   ├── __init__.py
│   └── models.py
├── migrations
│   ├── README
│   ├── alembic.ini
│   ├── env.py
│   ├── script.py.mako
│   └── versions
│       └── 9a71a8450641_.py
└── uploads
```

The table below summarizes the main files and directories.

|                |                                                              |
| -------------- | ------------------------------------------------------------ |
| Pipfile        | The file used by Pipenv virtual environment to manage project dependencies. |
| app.py         | The entry point file that initializes flask server and database. |
| config.py      | Loads .env file with variables based on ENV and populates the config object that can be imported in other files |
| api/           | Folder containing API logic.                                 |
| endpoints/     | Folder for files for API endpoints.  |
| user.py        | File containing logic for registering and logging in a user. |
| photo.py       | File containing logic for uploading, processing and viewing the photos. |
| ta.py          | File containing the two endpoints for the TA to perform automatic testing. |
| helpers.py     | File that contains helper functions and logic called by the endpoints to communicate with the DB.   |
| parsers.py     | Parsers are the structure templates for body data used in POST requests. |
| serializers.py | Similar to parsers, serializers define the (JSON) structure of outputted data returned from endpoints. |
| yolo-coco/     | Folder containing YOLO weights and configs and names of classes in coco dataset. | 
| yolo.py        | File that contains code for performing object detection using YOLOv3. |
| database/      | Folder for database settings and models.                      |
| __init__.py    | Creates a database instance that can be imported from other files. |
| models.py      | SQLAlchemy Representations of database tables                |
| migrations/    | Database migration versions generated by flask db init and manually edited to reflect the database structure |
| uploads/       | Folder for storing photos on the local file system.          |



## Database Schema

Our database consists of two tables: `users` and `photos`.

The table `users` consists of three columns: `id`, `username`, and `password`. The `id` is the primary key of the table and is auto-incremented with each new record. The `username` is a string and the `password` is generated using the PBKDF2 algorithm from Python’s `passlib.hash` library. 

The table `photos` consists of five columns: `id`, `user_id`, `thumbnail_link`, `photo_link`, and `processed_link`. The `id` is the primary key of the table and is auto-incremented with each new record. `user_id` is the foreign key to the `users` table’s `id`. `thumbnail_link`, `photo_link`, and `processed_link` contains the filename (with extensions) to the thumbnail photo, original photo, and the processed photo, respectively. To save or access the photos, the web application will navigate to the directory stored in `UPLOAD_FOLDER` in `config.py`. 
